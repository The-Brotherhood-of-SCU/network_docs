import{_ as s,c as d,b as r,w as e,a1 as l,a2 as c,l as n,o as t,I as o,a as i,D as u}from"./chunks/framework.B8ScJZFy.js";const _=JSON.parse('{"title":"DNS","description":"","frontmatter":{},"headers":[],"relativePath":"Application Layer/DNS.md","filePath":"Application Layer/DNS.md","lastUpdated":1760946048000}'),m={name:"Application Layer/DNS.md"},h=c('<h1 id="dns" tabindex="-1">DNS <a class="header-anchor" href="#dns" aria-label="Permalink to &quot;DNS&quot;">​</a></h1><h2 id="domain-name-system-域名系统" tabindex="-1"><strong>Domain Name System(域名系统)</strong> <a class="header-anchor" href="#domain-name-system-域名系统" aria-label="Permalink to &quot;**Domain Name System(域名系统)**&quot;">​</a></h2><ul><li><strong>distributed database</strong> implemented in hierarchy of many <strong>name servers</strong></li><li><strong>application-layer protocol</strong> host, routers, name servers to communicate to resolve names(address/name translation) <ul><li>NOTE: core Internet function implemented as <strong>application-layer protocol</strong></li><li>complexity at network&#39;s &quot;edge&quot;</li></ul></li></ul><h3 id="no-centralized-dns" tabindex="-1"><strong>No centralized DNS</strong> <a class="header-anchor" href="#no-centralized-dns" aria-label="Permalink to &quot;**No centralized DNS**&quot;">​</a></h3><ul><li>single point of failure</li><li>traffic volume</li><li>distant centralized database</li><li>maintenance</li><li>no server has all name-to-IP address mappings</li></ul><h3 id="local-name-servers" tabindex="-1"><strong>local name servers</strong> <a class="header-anchor" href="#local-name-servers" aria-label="Permalink to &quot;**local name servers**&quot;">​</a></h3><ul><li>each ISP, company has local(default) name server</li><li>host DNS query first goes to local name server</li></ul><h3 id="authoritative-name-server" tabindex="-1"><strong>authoritative name server</strong> <a class="header-anchor" href="#authoritative-name-server" aria-label="Permalink to &quot;**authoritative name server**&quot;">​</a></h3><ul><li>for a host: stores that host‟s IP address, name</li><li>can perform name/address translation for that host‟s name</li></ul><h3 id="root-name-server" tabindex="-1"><strong>Root name server</strong> <a class="header-anchor" href="#root-name-server" aria-label="Permalink to &quot;**Root name server**&quot;">​</a></h3><ul><li><strong>contacted by local name server that can not resolve name</strong></li><li>features <ul><li>contacts authoritative name server if name mapping not known</li><li>gets mapping</li><li>returns mapping to local name server</li></ul></li><li>dozen root name servers worldwide</li></ul><h2 id="query" tabindex="-1"><strong>Query</strong> <a class="header-anchor" href="#query" aria-label="Permalink to &quot;**Query**&quot;">​</a></h2><ul><li><strong>recursive query</strong><ul><li>puts burden of name resolution on contacted name server</li><li>heavy load?</li></ul></li><li><strong>iterated query</strong><ul><li>contacted server replies with name of server to contact</li><li><em>I don‟t know this name, but ask this server</em></li></ul></li></ul><p>caching and updating records</p><ul><li>once (any) name server learns mapping, it caches mapping <ul><li>cache entries timeout(disappear) after some time</li></ul></li><li>update/notify mechanisms under design by IETF <ul><li><strong>RFC 2136</strong></li></ul></li></ul><h2 id="records" tabindex="-1"><strong>records</strong> <a class="header-anchor" href="#records" aria-label="Permalink to &quot;**records**&quot;">​</a></h2><ul><li>distributed database storing Resource Records(RR)</li><li>RR format: <strong>(name, value, type, ttl)</strong></li></ul><table><thead><tr><th style="text-align:center;">type</th><th style="text-align:center;">name</th><th style="text-align:center;">value</th></tr></thead><tbody><tr><td style="text-align:center;">A</td><td style="text-align:center;">hostname</td><td style="text-align:center;">IP address</td></tr><tr><td style="text-align:center;">NS</td><td style="text-align:center;">domain</td><td style="text-align:center;">IP address of authoritative name server for this domain</td></tr><tr><td style="text-align:center;">CNAME</td><td style="text-align:center;">an alias name for some &quot;canonical&quot;(the real) name</td><td style="text-align:center;">canonical name</td></tr><tr><td style="text-align:center;">MX</td><td style="text-align:center;">what the hostname is associated with</td><td style="text-align:center;">hostname of mailserver</td></tr></tbody></table><h2 id="dns-protocol" tabindex="-1"><strong>DNS protocol</strong> <a class="header-anchor" href="#dns-protocol" aria-label="Permalink to &quot;**DNS protocol**&quot;">​</a></h2><blockquote><p><strong>query</strong> and <strong>reply</strong> messages, both with the same message format</p></blockquote><ul><li>header(12 bytes) <ul><li><strong>identification</strong>(2 bytes): uses the same for query, reply to query</li><li><strong>flags</strong><ul><li>query or reply</li><li>recursion desired</li><li>recursion available</li><li>reply is authoritative</li></ul></li><li>number of questions</li><li>number of answer RRs</li><li>number of authority RRs</li><li>number of additional RRs</li></ul></li><li>body(<strong>all parts are variable</strong>) <ul><li>questions: name, type fields for a query</li><li>answers: RRs in reponse to query</li><li>authority: records for authoritative servers</li><li>additional information: additional &quot;helpful&quot; info that may be used</li></ul></li></ul><h2 id="hierarchy" tabindex="-1">Hierarchy <a class="header-anchor" href="#hierarchy" aria-label="Permalink to &quot;Hierarchy&quot;">​</a></h2>',22),g=n("p",null,"Note: 根DNS与顶级DNS不储存域名映射，而是指引。",-1),p=n("p",null,"local DNS通过cache代理用户的查询，减少对公共DNS的查询次数，加快查询速度。",-1);function y(f,b,v,D,q,B){const a=u("Mermaid");return t(),d("div",null,[h,(t(),r(l,null,{default:e(()=>[o(a,{id:"mermaid-370",class:"mermaid",graph:"graph%20TD%3B%0A%20%20%20%20A%5BRoot%20Name%20Servers%5D%20--%3E%20B%5B%22Top-Level%20DNS(TLD)%22%5D%3B%0A%20%20%20%20A1%5B%22%2F%22%5D--%3EB1%5B.com%5D%3B%0A%20%20%20%20A1--%3EB2%5B.org%5D%3B%0A%20%20%20%20A1--%3EB3%5B.net%5D%3B%0A%20%20%20%20A1--%3EB4%5B.io%5D%3B%0A%20%20%20%20A1--%3EB5%5B.tech%5D%3B%0A%20%20%20%20B%20--%3E%20C%5Bauthoritative%20DNS%5D%3B%0A%20%20%20%20B1--%3EC1%5Btaobao.com%5D%0A%20%20%20%20B1--%3EC2%5Bbaidu.com%5D%0A%20%20%20%20B4--%3EC3%5Bgithub.io%5D%0A"})]),fallback:e(()=>[i(" Loading... ")]),_:1})),g,(t(),r(l,null,{default:e(()=>[o(a,{id:"mermaid-374",class:"mermaid",graph:"graph%20LR%3B%0AA%5BUser%5D--%3EB%5Blocal%20DNS%5D--%3EC%5BPulic%20DNS%5D%0A"})]),fallback:e(()=>[i(" Loading... ")]),_:1})),p])}const x=s(m,[["render",y]]);export{_ as __pageData,x as default};
